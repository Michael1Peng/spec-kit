# 架构概览 - 模板同步管理

## 架构图1: 模板复制流程架构

```
Git Repository
     │
     ├── templates/                    ← 模板源文件存储
     │   ├── spec-template.md
     │   ├── plan-template.md
     │   ├── agent-file-template.md
     │   └── commands/
     │
     ├── scripts/bash/                 ← 核心脚本层
     │   ├── create-new-feature.sh     ← 模板复制入口
     │   ├── setup-plan.sh             ← 计划模板复制
     │   ├── update-agent-context.sh   ← Agent配置同步
     │   └── common.sh                 ← 共享工具函数
     │
     └── specs/[branch-name]/          ← 目标文件位置
         ├── spec.md                   ← 复制的规格模板
         ├── plan.md                   ← 复制的计划模板
         └── [其他生成文件]
```

## 架构图2: 配置文件同步架构

```
Feature Branch Context
         │
         ├── plan.md 解析器          ← 提取配置信息
         │   ├── Language/Version
         │   ├── Dependencies
         │   ├── Storage
         │   └── Project Type
         │
         ├── 模板处理引擎              ← Python内联脚本
         │   ├── 字符串替换
         │   ├── 内容更新
         │   └── 格式化输出
         │
         └── 多Agent配置同步          ← 分发到各AI工具
             ├── CLAUDE.md
             ├── GEMINI.md
             ├── .github/copilot-instructions.md
             └── .cursor/rules/specify-rules.mdc
```

**关键技术栈**: Bash脚本 + Git + Python内联处理 + 模板变量替换